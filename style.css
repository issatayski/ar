/* v3: двухколоночный scrollytelling с закреплённой моделью */
* { box-sizing: border-box; }
:root{
  --bg:#0b0c10;
  --card:#0f1116;
  --muted:#a1a6b3;
  --text:#eef1f6;
  --brand:#4da3ff;
  --line:rgba(255,255,255,.08);
  --stickyTop: 64px; /* высота хедера */
}
html,body{height:100%;}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial,sans-serif;
  color:var(--text);
  background:radial-gradient(1000px 600px at 20% -10%, #1b2030 0%, transparent 60%) , var(--bg);
  line-height:1.6;
}
.container{width:min(1120px, 92vw); margin-inline:auto;}

.site-header{
  position:sticky; top:0; z-index:30;
  background:linear-gradient(180deg, rgba(11,12,16,.95), rgba(11,12,16,.7));
  backdrop-filter: blur(6px);
  border-bottom:1px solid var(--line);
}
.header-row{display:flex; align-items:center; gap:16px; padding:12px 0;}
.brand{display:flex; align-items:center; gap:10px; font-weight:700;}
.logo{width:22px;height:22px;border:2px solid var(--brand); border-radius:6px; display:grid; place-items:center; font-size:10px;}
.nav{display:flex; gap:16px; margin-left:auto;}
.nav a{color:var(--text); text-decoration:none; opacity:.9;}
.nav a:hover{opacity:1;}
.btn{background:var(--brand); color:#06121e; border:1px solid transparent; padding:10px 14px; border-radius:12px; font-weight:600; text-decoration:none; display:inline-block;}
.btn:hover{filter:brightness(1.05);}
.btn.small{padding:8px 12px; font-size:.9rem; border-radius:10px;}
.btn.outline{background:transparent; border-color:var(--line); color:var(--text);}

.scrolly{
  display:grid;
  grid-template-columns: 1fr 1fr;
  min-height:100vh;
}
.scrolly-visual{
  position:relative;
  border-right:1px solid var(--line);
  min-height:100vh;
}
.visual-wrap{
  position:sticky;
  top:var(--stickyTop);
  height:calc(100vh - var(--stickyTop));
  border-bottom:1px solid var(--line);
  background:linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}
.gesture-hint{
  position:absolute; bottom:12px; right:12px;
  font-size:.9rem; color:var(--muted);
  background:rgba(0,0,0,.35); padding:6px 8px; border-radius:10px;
  pointer-events:none;
}
.ar-row{
  position:sticky;
  top:calc(100vh - 52px);
  display:flex; gap:10px; padding:8px 12px;
  background:linear-gradient(0deg, rgba(11,12,16,.85), rgba(11,12,16,.0));
  border-top:1px solid var(--line);
}
.error-banner{margin:8px 12px;background: rgba(255,107,107,.12);border:1px solid rgba(255,107,107,.35);color:var(--text);padding:8px 10px;border-radius:10px;}

.scrolly-steps{
  min-height:200vh;
  padding:24px clamp(14px, 3vw, 28px);
}
.intro{margin:12px 0 36px 0;}
.frame{
  padding:56px 0;
  border-top:1px solid var(--line);
  max-width:720px;
}
.frame:first-of-type{border-top:0;}
.frame h2{margin:0 0 6px 0;}
.list{margin:12px 0 0 0; padding-left:18px;}
.list li{margin:6px 0;}

.site-footer{border-top:1px solid var(--line); padding:20px 0; background:rgba(0,0,0,.25); margin-top:32px;}
.footer-row{display:flex; align-items:center; justify-content:space-between;}
.muted{color:var(--muted);}
.small{font-size:.92rem}

/* Редактор */
.editor{
  position: fixed; inset: 64px 12px auto auto; width:min(380px, 92vw);
  background: var(--card); border:1px solid var(--line); border-radius:16px;
  box-shadow: 0 10px 40px rgba(0,0,0,.35); padding:10px; display:none; z-index:50;
}
.editor[aria-hidden="false"]{display:block;}
.editor-head{display:flex; align-items:center; justify-content:space-between; padding:6px 6px 10px 6px; border-bottom:1px solid var(--line);}
.icon-btn{background:transparent; border:0; color:var(--text); font-size:16px; cursor:pointer;}
.editor-body{padding:8px 6px 6px 6px; display:grid; gap:10px;}
.editor-list{display:grid; gap:8px; max-height:45vh; overflow:auto; padding-right:4px;}
.editor-item{border:1px solid var(--line); border-radius:12px; padding:8px; display:grid; gap:6px;}
.editor-item h4{margin:0 0 2px 0}
.editor-row{display:grid; grid-template-columns: 1fr 1fr; gap:6px;}
.editor-row input{width:100%; padding:6px 8px; border-radius:10px; border:1px solid var(--line); background:#0c0f14; color:var(--text);}
.editor-actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
.json-io{min-height:90px; width:100%; border-radius:12px; border:1px solid var(--line); background:#0c0f14; color:var(--text); padding:8px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:.9rem;}

/* Мобильная раскладка */
@media (max-width: 992px){
  .scrolly{grid-template-columns:1fr;}
  .scrolly-visual{
    position:sticky; top:var(--stickyTop);
    height:calc(60vh - 0px); border-right:0;
  }
  .visual-wrap{
    position:relative; top:0; height:60vh;
  }
  .ar-row{position:relative; top:auto; justify-content:flex-start;}
}
